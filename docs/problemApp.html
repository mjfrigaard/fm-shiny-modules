<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>problemApp</title>

<script src="site_libs/header-attrs-2.13/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/darkly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #2a211c;
    color: #bdae9d;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #bdae9d;  padding-left: 4px; }
div.sourceCode
  { color: #bdae9d; background-color: #2a211c; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ffff00; } /* Alert */
code span.an { color: #0066ff; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #44aa43; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #43a8ed; font-weight: bold; } /* ControlFlow */
code span.ch { color: #049b0a; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #0066ff; font-weight: bold; font-style: italic; } /* Comment */
code span.do { color: #0066ff; font-style: italic; } /* Documentation */
code span.dt { text-decoration: underline; } /* DataType */
code span.dv { color: #44aa43; } /* DecVal */
code span.er { color: #ffff00; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #44aa43; } /* Float */
code span.fu { color: #ff9358; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #0066ff; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #43a8ed; font-weight: bold; } /* Keyword */
code span.op { } /* Operator */
code span.pp { font-weight: bold; } /* Preprocessor */
code span.sc { color: #049b0a; } /* SpecialChar */
code span.ss { color: #049b0a; } /* SpecialString */
code span.st { color: #049b0a; } /* String */
code span.va { } /* Variable */
code span.vs { color: #049b0a; } /* VerbatimString */
code span.wa { color: #ffff00; font-weight: bold; } /* Warning */

.sourceCode .row {
  width: 100%;
}
.sourceCode {
  overflow-x: auto;
}
.code-folding-btn {
  margin-right: -30px;
}
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>







<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#section-TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#section-TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="section-TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">fm-shiny-modules</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">modules</a>
</li>
<li>
  <a href="problemApp.html">A problematic shiny app</a>
</li>
<li>
  <a href="plotMod.html">A plot module</a>
</li>
<li>
  <a href="dataMod.html">A data module</a>
</li>
<li>
  <a href="plotdataMod.html">plot + data module</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="section-header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">problemApp</h1>

</div>


<p><br></p>
<div id="section-an-app-without-modules" class="section level1">
<h1>An app without modules</h1>
<p><br></p>
<p>First I am going to create a shiny app <em>without</em> modules using
data from the <a
href="https://allisonhorst.github.io/palmerpenguins/"><code>palmerpenguins</code></a>
package. This application is stored in separate <code>ui.R</code> and
<code>server.R</code> files. The goal of this application is to build a
plot and display a table of three variables from the
<code>penguins</code> data. The plot is built using <a
href="https://ggplot2.tidyverse.org/"><code>ggplot2</code></a>, and the
table is built using the <a
href="https://glin.github.io/reactable/"><code>reactable</code>
package</a>.</p>
<p><br></p>
</div>
<div id="section-ui.r" class="section level1">
<h1>ui.R</h1>
<p><br></p>
<p>In the UI</p>
<ul>
<li><p>add <code>inputId</code>’s for the graph and table
outputs</p></li>
<li><p>include labels in the comments for each of input
<code>(graph)</code> and <code>(table)</code>.</p></li>
<li><p>I also added a <code>"value"</code> output (with
<code>verbatimTextOutput()</code>) that I will explain more in the UI
Server section below.</p></li>
</ul>
<div class="sourceCode" id="section-cb1"><pre
class="sourceCode r"><code class="sourceCode r"><span id="section-cb1-1"><a href="#section-cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># packages ------------------------------------------</span></span>
<span id="section-cb1-2"><a href="#section-cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="section-cb1-3"><a href="#section-cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="section-cb1-4"><a href="#section-cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="section-cb1-5"><a href="#section-cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reactable)</span>
<span id="section-cb1-6"><a href="#section-cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb1-7"><a href="#section-cb1-7" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="section-cb1-8"><a href="#section-cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="section-cb1-9"><a href="#section-cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarPanel</span>(</span>
<span id="section-cb1-10"><a href="#section-cb1-10" aria-hidden="true" tabindex="-1"></a>      <span class="co"># x variable graph</span></span>
<span id="section-cb1-11"><a href="#section-cb1-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">selectInput</span>(</span>
<span id="section-cb1-12"><a href="#section-cb1-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">inputId =</span> <span class="st">&quot;x_var&quot;</span>,</span>
<span id="section-cb1-13"><a href="#section-cb1-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">label =</span> <span class="st">&quot;X column (graph)&quot;</span>,</span>
<span id="section-cb1-14"><a href="#section-cb1-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">selected =</span> <span class="st">&quot;body_mass_g&quot;</span>,</span>
<span id="section-cb1-15"><a href="#section-cb1-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">choices =</span> <span class="fu">names</span>(</span>
<span id="section-cb1-16"><a href="#section-cb1-16" aria-hidden="true" tabindex="-1"></a>          <span class="fu">select</span>(</span>
<span id="section-cb1-17"><a href="#section-cb1-17" aria-hidden="true" tabindex="-1"></a>            palmerpenguins<span class="sc">::</span>penguins, <span class="fu">where</span>(is.numeric)</span>
<span id="section-cb1-18"><a href="#section-cb1-18" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="section-cb1-19"><a href="#section-cb1-19" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="section-cb1-20"><a href="#section-cb1-20" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="section-cb1-21"><a href="#section-cb1-21" aria-hidden="true" tabindex="-1"></a>      <span class="co"># x variable table</span></span>
<span id="section-cb1-22"><a href="#section-cb1-22" aria-hidden="true" tabindex="-1"></a>      <span class="fu">selectInput</span>(</span>
<span id="section-cb1-23"><a href="#section-cb1-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">inputId =</span> <span class="st">&quot;x_var&quot;</span>,</span>
<span id="section-cb1-24"><a href="#section-cb1-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">label =</span> <span class="st">&quot;X column (table)&quot;</span>,</span>
<span id="section-cb1-25"><a href="#section-cb1-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">selected =</span> <span class="st">&quot;body_mass_g&quot;</span>,</span>
<span id="section-cb1-26"><a href="#section-cb1-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">choices =</span> <span class="fu">names</span>(palmerpenguins<span class="sc">::</span>penguins)</span>
<span id="section-cb1-27"><a href="#section-cb1-27" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="section-cb1-28"><a href="#section-cb1-28" aria-hidden="true" tabindex="-1"></a>      <span class="co"># y variable graph</span></span>
<span id="section-cb1-29"><a href="#section-cb1-29" aria-hidden="true" tabindex="-1"></a>      <span class="fu">selectInput</span>(</span>
<span id="section-cb1-30"><a href="#section-cb1-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">inputId =</span> <span class="st">&quot;y_var&quot;</span>,</span>
<span id="section-cb1-31"><a href="#section-cb1-31" aria-hidden="true" tabindex="-1"></a>        <span class="at">label =</span> <span class="st">&quot;Y column (graph)&quot;</span>,</span>
<span id="section-cb1-32"><a href="#section-cb1-32" aria-hidden="true" tabindex="-1"></a>        <span class="at">selected =</span> <span class="st">&quot;bill_length_mm&quot;</span>,</span>
<span id="section-cb1-33"><a href="#section-cb1-33" aria-hidden="true" tabindex="-1"></a>        <span class="at">choices =</span> <span class="fu">names</span>(</span>
<span id="section-cb1-34"><a href="#section-cb1-34" aria-hidden="true" tabindex="-1"></a>          <span class="fu">select</span>(</span>
<span id="section-cb1-35"><a href="#section-cb1-35" aria-hidden="true" tabindex="-1"></a>            palmerpenguins<span class="sc">::</span>penguins, <span class="fu">where</span>(is.numeric)</span>
<span id="section-cb1-36"><a href="#section-cb1-36" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="section-cb1-37"><a href="#section-cb1-37" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="section-cb1-38"><a href="#section-cb1-38" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="section-cb1-39"><a href="#section-cb1-39" aria-hidden="true" tabindex="-1"></a>      <span class="co"># y variable table</span></span>
<span id="section-cb1-40"><a href="#section-cb1-40" aria-hidden="true" tabindex="-1"></a>      <span class="fu">selectInput</span>(</span>
<span id="section-cb1-41"><a href="#section-cb1-41" aria-hidden="true" tabindex="-1"></a>        <span class="at">inputId =</span> <span class="st">&quot;y_var&quot;</span>,</span>
<span id="section-cb1-42"><a href="#section-cb1-42" aria-hidden="true" tabindex="-1"></a>        <span class="at">label =</span> <span class="st">&quot;Y column (table)&quot;</span>,</span>
<span id="section-cb1-43"><a href="#section-cb1-43" aria-hidden="true" tabindex="-1"></a>        <span class="at">selected =</span> <span class="st">&quot;bill_length_mm&quot;</span>,</span>
<span id="section-cb1-44"><a href="#section-cb1-44" aria-hidden="true" tabindex="-1"></a>        <span class="at">choices =</span> <span class="fu">names</span>(palmerpenguins<span class="sc">::</span>penguins)</span>
<span id="section-cb1-45"><a href="#section-cb1-45" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="section-cb1-46"><a href="#section-cb1-46" aria-hidden="true" tabindex="-1"></a>      <span class="co"># color graph</span></span>
<span id="section-cb1-47"><a href="#section-cb1-47" aria-hidden="true" tabindex="-1"></a>      <span class="fu">selectInput</span>(</span>
<span id="section-cb1-48"><a href="#section-cb1-48" aria-hidden="true" tabindex="-1"></a>        <span class="at">inputId =</span> <span class="st">&quot;color&quot;</span>,</span>
<span id="section-cb1-49"><a href="#section-cb1-49" aria-hidden="true" tabindex="-1"></a>        <span class="at">label =</span> <span class="st">&quot;Color column (graph)&quot;</span>,</span>
<span id="section-cb1-50"><a href="#section-cb1-50" aria-hidden="true" tabindex="-1"></a>        <span class="at">selected =</span> <span class="st">&quot;species&quot;</span>,</span>
<span id="section-cb1-51"><a href="#section-cb1-51" aria-hidden="true" tabindex="-1"></a>        <span class="at">choices =</span> <span class="fu">names</span>(</span>
<span id="section-cb1-52"><a href="#section-cb1-52" aria-hidden="true" tabindex="-1"></a>          <span class="fu">select</span>(</span>
<span id="section-cb1-53"><a href="#section-cb1-53" aria-hidden="true" tabindex="-1"></a>            palmerpenguins<span class="sc">::</span>penguins, <span class="fu">where</span>(is.factor)</span>
<span id="section-cb1-54"><a href="#section-cb1-54" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="section-cb1-55"><a href="#section-cb1-55" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="section-cb1-56"><a href="#section-cb1-56" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="section-cb1-57"><a href="#section-cb1-57" aria-hidden="true" tabindex="-1"></a>      <span class="co"># color table</span></span>
<span id="section-cb1-58"><a href="#section-cb1-58" aria-hidden="true" tabindex="-1"></a>      <span class="fu">selectInput</span>(</span>
<span id="section-cb1-59"><a href="#section-cb1-59" aria-hidden="true" tabindex="-1"></a>        <span class="at">inputId =</span> <span class="st">&quot;color&quot;</span>,</span>
<span id="section-cb1-60"><a href="#section-cb1-60" aria-hidden="true" tabindex="-1"></a>        <span class="at">label =</span> <span class="st">&quot;Color column (table)&quot;</span>,</span>
<span id="section-cb1-61"><a href="#section-cb1-61" aria-hidden="true" tabindex="-1"></a>        <span class="at">selected =</span> <span class="st">&quot;species&quot;</span>,</span>
<span id="section-cb1-62"><a href="#section-cb1-62" aria-hidden="true" tabindex="-1"></a>        <span class="at">choices =</span> <span class="fu">names</span>(palmerpenguins<span class="sc">::</span>penguins)</span>
<span id="section-cb1-63"><a href="#section-cb1-63" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="section-cb1-64"><a href="#section-cb1-64" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="section-cb1-65"><a href="#section-cb1-65" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="section-cb1-66"><a href="#section-cb1-66" aria-hidden="true" tabindex="-1"></a>      <span class="co"># plot</span></span>
<span id="section-cb1-67"><a href="#section-cb1-67" aria-hidden="true" tabindex="-1"></a>      <span class="fu">plotOutput</span>(<span class="at">outputId =</span> <span class="st">&quot;plot&quot;</span>),</span>
<span id="section-cb1-68"><a href="#section-cb1-68" aria-hidden="true" tabindex="-1"></a>      <span class="fu">br</span>(), <span class="fu">br</span>(),</span>
<span id="section-cb1-69"><a href="#section-cb1-69" aria-hidden="true" tabindex="-1"></a>      <span class="fu">reactableOutput</span>(<span class="at">outputId =</span> <span class="st">&quot;table&quot;</span>),</span>
<span id="section-cb1-70"><a href="#section-cb1-70" aria-hidden="true" tabindex="-1"></a>      <span class="co"># values</span></span>
<span id="section-cb1-71"><a href="#section-cb1-71" aria-hidden="true" tabindex="-1"></a>      tags<span class="sc">$</span><span class="fu">strong</span>(tags<span class="sc">$</span><span class="fu">code</span>(<span class="st">&quot;reactiveValues:&quot;</span>)),</span>
<span id="section-cb1-72"><a href="#section-cb1-72" aria-hidden="true" tabindex="-1"></a>      <span class="fu">verbatimTextOutput</span>(<span class="at">outputId =</span> <span class="st">&quot;value&quot;</span>)</span>
<span id="section-cb1-73"><a href="#section-cb1-73" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="section-cb1-74"><a href="#section-cb1-74" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="section-cb1-75"><a href="#section-cb1-75" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><em>If you’re somewhat familiar with shiny code, you’re immediately
wondering how shiny is going to handle this duplication of names (as you
should). But, since this application is meant to demonstrate namespace
collisions, we’re purposely designing it with some known
issues.</em></p>
<p><br></p>
</div>
<div id="section-server.r" class="section level1">
<h1>server.R</h1>
<p><br></p>
<p>In the <code>server.R</code></p>
<ul>
<li><p>create the <code>data()</code> reactive and use it in both the
<code>output$plot</code> and <code>output$table</code></p></li>
<li><p>also added the <code>reactiveValuesToList()</code> function,
which will create a list of all the values in the
<code>reactivevalues</code> object (within a particular
namespace).</p></li>
</ul>
<div class="sourceCode" id="section-cb2"><pre
class="sourceCode r"><code class="sourceCode r"><span id="section-cb2-1"><a href="#section-cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># packages ------------------------------------------</span></span>
<span id="section-cb2-2"><a href="#section-cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="section-cb2-3"><a href="#section-cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="section-cb2-4"><a href="#section-cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="section-cb2-5"><a href="#section-cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reactable)</span>
<span id="section-cb2-6"><a href="#section-cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb2-7"><a href="#section-cb2-7" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="section-cb2-8"><a href="#section-cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># data</span></span>
<span id="section-cb2-9"><a href="#section-cb2-9" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">reactive</span>(</span>
<span id="section-cb2-10"><a href="#section-cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(</span>
<span id="section-cb2-11"><a href="#section-cb2-11" aria-hidden="true" tabindex="-1"></a>      palmerpenguins<span class="sc">::</span>penguins,</span>
<span id="section-cb2-12"><a href="#section-cb2-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">all_of</span>(<span class="fu">c</span>(input<span class="sc">$</span>x_var, input<span class="sc">$</span>y_var, input<span class="sc">$</span>color))</span>
<span id="section-cb2-13"><a href="#section-cb2-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="section-cb2-14"><a href="#section-cb2-14" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="section-cb2-15"><a href="#section-cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb2-16"><a href="#section-cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># plot display</span></span>
<span id="section-cb2-17"><a href="#section-cb2-17" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>plot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="section-cb2-18"><a href="#section-cb2-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># y labels</span></span>
<span id="section-cb2-19"><a href="#section-cb2-19" aria-hidden="true" tabindex="-1"></a>    y_lab <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(input<span class="sc">$</span>y_var, <span class="st">&quot;_&quot;</span>, <span class="st">&quot; &quot;</span>)</span>
<span id="section-cb2-20"><a href="#section-cb2-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># x labels</span></span>
<span id="section-cb2-21"><a href="#section-cb2-21" aria-hidden="true" tabindex="-1"></a>    x_lab <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(input<span class="sc">$</span>x_var, <span class="st">&quot;_&quot;</span>, <span class="st">&quot; &quot;</span>)</span>
<span id="section-cb2-22"><a href="#section-cb2-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># graph</span></span>
<span id="section-cb2-23"><a href="#section-cb2-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">data</span>()) <span class="sc">+</span></span>
<span id="section-cb2-24"><a href="#section-cb2-24" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_point</span>(<span class="fu">aes_string</span>(</span>
<span id="section-cb2-25"><a href="#section-cb2-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> input<span class="sc">$</span>x_var, </span>
<span id="section-cb2-26"><a href="#section-cb2-26" aria-hidden="true" tabindex="-1"></a>          <span class="at">y =</span> input<span class="sc">$</span>y_var,</span>
<span id="section-cb2-27"><a href="#section-cb2-27" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> input<span class="sc">$</span>color</span>
<span id="section-cb2-28"><a href="#section-cb2-28" aria-hidden="true" tabindex="-1"></a>      )) <span class="sc">+</span></span>
<span id="section-cb2-29"><a href="#section-cb2-29" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(</span>
<span id="section-cb2-30"><a href="#section-cb2-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span></span>
<span id="section-cb2-31"><a href="#section-cb2-31" aria-hidden="true" tabindex="-1"></a>          <span class="fu">paste0</span>(<span class="st">&quot;Histogram of &quot;</span>, x_lab, <span class="st">&quot; and &quot;</span>, y_lab),</span>
<span id="section-cb2-32"><a href="#section-cb2-32" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> x_lab,</span>
<span id="section-cb2-33"><a href="#section-cb2-33" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> y_lab</span>
<span id="section-cb2-34"><a href="#section-cb2-34" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="section-cb2-35"><a href="#section-cb2-35" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="section-cb2-36"><a href="#section-cb2-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb2-37"><a href="#section-cb2-37" aria-hidden="true" tabindex="-1"></a>  <span class="co"># table display</span></span>
<span id="section-cb2-38"><a href="#section-cb2-38" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>table <span class="ot">&lt;-</span> reactable<span class="sc">::</span><span class="fu">renderReactable</span>({</span>
<span id="section-cb2-39"><a href="#section-cb2-39" aria-hidden="true" tabindex="-1"></a>    reactable<span class="sc">::</span><span class="fu">reactable</span>(</span>
<span id="section-cb2-40"><a href="#section-cb2-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">data =</span> <span class="fu">data</span>(),</span>
<span id="section-cb2-41"><a href="#section-cb2-41" aria-hidden="true" tabindex="-1"></a>      <span class="co"># reactable settings ------</span></span>
<span id="section-cb2-42"><a href="#section-cb2-42" aria-hidden="true" tabindex="-1"></a>      <span class="at">defaultPageSize =</span> <span class="dv">10</span>,</span>
<span id="section-cb2-43"><a href="#section-cb2-43" aria-hidden="true" tabindex="-1"></a>      <span class="at">resizable =</span> <span class="cn">TRUE</span>,</span>
<span id="section-cb2-44"><a href="#section-cb2-44" aria-hidden="true" tabindex="-1"></a>      <span class="at">highlight =</span> <span class="cn">TRUE</span>,</span>
<span id="section-cb2-45"><a href="#section-cb2-45" aria-hidden="true" tabindex="-1"></a>      <span class="at">height =</span> <span class="dv">350</span>,</span>
<span id="section-cb2-46"><a href="#section-cb2-46" aria-hidden="true" tabindex="-1"></a>      <span class="at">wrap =</span> <span class="cn">FALSE</span>,</span>
<span id="section-cb2-47"><a href="#section-cb2-47" aria-hidden="true" tabindex="-1"></a>      <span class="at">bordered =</span> <span class="cn">TRUE</span>,</span>
<span id="section-cb2-48"><a href="#section-cb2-48" aria-hidden="true" tabindex="-1"></a>      <span class="at">searchable =</span> <span class="cn">TRUE</span>,</span>
<span id="section-cb2-49"><a href="#section-cb2-49" aria-hidden="true" tabindex="-1"></a>      <span class="at">filterable =</span> <span class="cn">TRUE</span></span>
<span id="section-cb2-50"><a href="#section-cb2-50" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="section-cb2-51"><a href="#section-cb2-51" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="section-cb2-52"><a href="#section-cb2-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb2-53"><a href="#section-cb2-53" aria-hidden="true" tabindex="-1"></a>  <span class="co"># reactive values</span></span>
<span id="section-cb2-54"><a href="#section-cb2-54" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>value <span class="ot">&lt;-</span> <span class="fu">renderPrint</span>({</span>
<span id="section-cb2-55"><a href="#section-cb2-55" aria-hidden="true" tabindex="-1"></a>    all_values <span class="ot">&lt;-</span> <span class="fu">reactiveValuesToList</span>(<span class="at">x =</span> input, <span class="at">all.names =</span> <span class="cn">TRUE</span>)</span>
<span id="section-cb2-56"><a href="#section-cb2-56" aria-hidden="true" tabindex="-1"></a>    values <span class="ot">&lt;-</span> all_values[<span class="fu">str_detect</span>(<span class="fu">names</span>(all_values), <span class="st">&quot;color|x_var|y_var&quot;</span>)]</span>
<span id="section-cb2-57"><a href="#section-cb2-57" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(values)</span>
<span id="section-cb2-58"><a href="#section-cb2-58" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="section-cb2-59"><a href="#section-cb2-59" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><br></p>
</div>
<div id="section-app" class="section level1">
<h1>App</h1>
<p><br></p>
<div class="sourceCode" id="section-cb3"><pre
class="sourceCode r"><code class="sourceCode r"><span id="section-cb3-1"><a href="#section-cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server, </span>
<span id="section-cb3-2"><a href="#section-cb3-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">options =</span> <span class="fu">list</span>(<span class="at">height =</span> <span class="dv">600</span>, <span class="at">width =</span> <span class="dv">800</span>))</span></code></pre></div>
<p><iframe data-deferred-src="appc7988b28798fa81fd809f227a4a1d499/?w=&amp;__subapp__=1" width="800" height="600" class="shiny-frame shiny-frame-deferred"></iframe></p>
<p>I also deployed these apps using
<code>display.mode = "showcase"</code>, and I can see the
<code>output$graph</code> and <code>output$table</code> light up when we
change the <strong>X column (graph)</strong>:</p>
<p><img src="images/plotdataApp-x_var.gif" /><!-- --></p>
<p>When I check the additional <code>selectInput()</code>s, I can see
that only the values for <strong>(graph)</strong> trigger the code in
the server (none of the values for <strong>(table)</strong> trigger a
response).</p>
<p><img src="images/plotdataApp-x_var-no-reaction.gif" /><!-- --></p>
<p><br></p>
</div>
<div id="section-namespace-collision" class="section level1">
<h1>Namespace collision</h1>
<p><br></p>
<p>This application has both the plot and table outputs, and six
<code>selectInputs()</code>s for controlling the variables in the
outputs (labeled <strong>(table)</strong> and <strong>(graph)</strong>).
To test the reactivity, we’re going to change the variable for <strong>X
column (graph)</strong> to <code>bill_depth_mm</code>. We should see the
graph change (and we do):</p>
<p><img src="images/plotdata-ui-server-x_var.png" width="100%" height="100%" style="display: block; margin: auto;" /></p>
<p>However, we also see the data in the table display change (even
though we didn’t change this input):</p>
<p><img src="images/plotdata-ui-server-x_var-table.png" width="100%" height="100%" style="display: block; margin: auto;" /></p>
<p><br></p>
</div>
<div id="section-execution-order" class="section level1">
<h1>Execution order</h1>
<p><br></p>
<div
id="section-but-why-did-the-table-change-even-though-we-didnt-change-the-input"
class="section level3">
<h3><strong><em>But why did the table change even though we didn’t
change the input?</em></strong></h3>
<p><br></p>
<p>Well, the answer is covered here in the ‘<a
href="https://mastering-shiny.org/basic-reactivity.html#execution-order">execution
order</a>’ section of Mastering Shiny:</p>
<blockquote>
<p><strong><em>the order in which reactive code is run is determined
only by the reactive graph, not by its layout in the server
function.</em></strong></p>
</blockquote>
<p>Recall the <a
href="https://mastering-shiny.org/basic-reactivity.html#reactive-expressions-1">reactive
expression graph</a> from Mastering Shiny below:</p>
<p><img src="https://d33wubrfki0l68.cloudfront.net/8dcc3f2cbc55486a76b33a5acd30e379cd05d8ab/27c40/diagrams/basic-reactivity/producers-consumers.png" width="100%" height="100%" style="display: block; margin: auto;" /></p>
<p><img src="" /></p>
<p>The <code>graph</code> has a reactive dependency on
<code>x_var</code>:</p>
<p><img src="images/reactive-dependency.png" width="100%" height="100%" style="display: block; margin: auto;" /></p>
<p>When we include the reactive expression in the graph,
<code>input$x_var</code> and <code>data()</code> are the
<strong>Producers</strong>, while <code>data()</code> and
<code>output$graph</code> are the <strong>Consumers</strong>.</p>
<p><img src="images/producers-consumers.png" width="100%" height="100%" style="display: block; margin: auto;" /></p>
<p>So, the <code>input$x_var</code> value in the graph changes when we
select <code>bill_depth_mm</code>, and <code>data()</code> is changed in
both <code>output$graph</code> <em>and</em> <code>output$table</code>.
The table is only updated when the reactable <code>data()</code> is
changed (i.e. when the graph uses these values explicitly in
<code>aes_string(x = input$x_var)</code>).</p>
</div>
<div id="section-reactive-values" class="section level2">
<h2>Reactive values</h2>
<p>If I check the the <code>reactiveValues</code> output, I can see
there is only one column associated with the <code>$x_var</code> input
(<code>bill_depth_mm</code>):</p>
<p><img src="images/plotdata-ui-server-x_var-values.png" width="1281" /></p>
<ol style="list-style-type: decimal">
<li><p>When <strong>X column (graph)</strong> is changed, the
<code>input$x_var</code> value is updated in the graph</p></li>
<li><p>The <code>input$x_var</code> for <strong>X column
(table)</strong> is ignored and the reactable table is not
updated</p></li>
</ol>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("section-TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#section-TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
